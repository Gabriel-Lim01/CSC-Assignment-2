<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.24.min.js"></script>
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script>
        AWS.config.update({
            accessKeyId: '',
            secretAccessKey: '',
            sessionToken: ''
        });
        //AWS.config.region = 'US East (N. Virginia)----------us-east-1';

        function uploadFile() {
            var s3 = new AWS.S3({
                params: { Bucket: 'cscmybucket' }
            });
            var file = document.getElementById('file').files[0];
            if (file) {
                s3.putObject({
                    Key: file.name,
                    ContentType: file.type,
                    Body: file,
                    ACL: "public-read"
                },
                    function (err, data) {
                        if (data !== null) {
                            alert("Got it!");
                        }
                        else {
                            console.log('Theres an error', data);
                            alert("UploadFile function has error!: " + err);
                        }
                    });
            }
        }

        var s3BucketName = 'cscmybucket';

        function listObjs() {
            var s3 = new AWS.S3({
                params: { Bucket: s3BucketName }
            });
            s3.listObjects(function (error, data) {
                if (error === null) {
                    var html_keys = 'Object Keys:<br />';
                    var html_imgs = '';
                    jQuery.each(data.Contents, function (index, obj) {
                        html_keys += (index + ': ' + obj.Key + '<br />');

 html_imgs += "<img src='" + "https://s3.amazonaws.com/"
                            + s3BucketName + "/" + obj.Key + "'/><br/>";

                    });
                    jQuery("#objKeys").html(html_keys);
                    jQuery("#objImgs").html(html_imgs);
                } else { console.log(error); }
            });
        }

    </script>
</head>
<body>
    <input type="file" name="file" id="file" value="dataFile" required="">
    <button onclick="uploadFile()">Upload to S3</button>
    <button onclick="listObjs()">
        S3 - List Objects
    </button>
    <div id="objKeys"></div>
    <div id="objImgs"></div>


</body>
</html>